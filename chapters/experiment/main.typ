#import "../../define.typ": *

= 实验评估

本章将对所提出的自动化一致性检测工具 #(tool) 进行系统性的实验评估。评估旨在验证该工具在真实应用场景中的有效性、准确性以及各个核心模块的性能表现。具体的实验设计围绕以下三个核心研究问题（Research Questions, RQs）展开：

+ *RQ1: 屏幕级一致性检测能力（Screen Inconsistency Detection）。* 在公开的移动应用数据集上，#(tool) 能否准确地识别出应用实现与设计稿之间的屏幕级差异（包括控件缺失、多余及属性不一致）？
+ *RQ2: 流程级一致性检测能力（Process Inconsistency Detection）。* 针对包含多个交互步骤的动态业务流程，#(tool) 在检测“流程不一致”方面的效果如何？
+ *RQ3: 核心组件性能评估（Component-level Evaluation）。* 构成工具的关键模块是否具备足够的准确性以支撑整体任务？具体包括：
  + 视觉模型在典型移动应用界面上的控件检测精度如何？
  + 视觉语言模型（VLM）能否将自然语言描述的转移指令准确转换为可执行的自动化操作序列？

== 数据集构建与实验设置

为了确保实验结果的普适性与可靠性，本研究构建了一个包含多样化应用场景的测试数据集。数据来源于 Google Play 商店中的 80 款热门免费应用，涵盖了商业办公、即时通信、金融理财及社交网络等主流类别。这些应用不仅具有复杂的界面布局，还包含了丰富的交互逻辑，能够充分测试工具在不同设计风格下的适应能力。

在“模拟设计稿”的生成过程中，邀请了四位具有至少两年专业软件开发与测试经验的专家参与标注。针对每一个选定的应用，专家需依据其核心功能定义两个典型的用户操作场景（例如“关注特定的社交账号”或“修改应用通知偏好设置”）。专家详细记录了完成这些流程所需的所有屏幕截图、界面层级结构以及屏幕间的转换动作链。这些经过人工校验的流程数据被用作实验中的“标准设计稿”（Ground Truth）。最终，实验数据集共包含从 80 个应用中提取的 160 套设计稿流程，每套流程平均包含约 8 个屏幕节点。关于收集到的流程示例的更多细节，请参阅 @dataset-examples。

== 参数设置与优化

算法 @algo:widget-matching 中涉及的关键超参数 $alpha$ 和 $delta$ 对组件匹配的准确性具有显著影响。为了确定最优的参数组合，本实验采用了网格搜索（Grid Search）策略，并以屏幕一致性实验（详见 @exp:rq1）的综合性能指标作为优化的目标函数。

经过实验验证，最终选定位置相似度缩放因子 $alpha=10$。该参数的选择依据在于：适当的缩放因子能够使位置相似度评分 $s i m_(p o s)$ 在区间 $(0,1]$ 上呈更均匀的分布，从而增强模型对不同距离偏差的区分度；若不进行缩放或缩放不足，$s i m_(p o s)$ 往往在小距离偏差下过于集中在 1 附近，导致模型难以区分细微的位置偏移。同时，类型惩罚因子 $delta$ 被设定为 0.5，意味着当匹配的两个控件属于不同类别时，其基础相似度得分将减半，以此来体现类型一致性在匹配判定中的重要权重。

在细粒度的属性一致性检查中，设定了如下具体的判定阈值：
- *文本一致性：* 采用归一化的编辑距离作为度量标准，当字符串相似度低于 $epsilon_(e d)=0.95$ 时，判定为文本内容违规。
- *视觉与颜色一致性：* 对于颜色判定，系统提取每个控件中出现频率最高的前三种主色调，并计算其 RGB 向量差异。若颜色差异超过 $epsilon_(c o l o r)=0.05$，则视为颜色不一致。此外，在二值化图像差分对比中，要求差异像素的比例不得超过 $epsilon_(b i n a r y)=20\%$，以容忍渲染过程中产生的轻微抗锯齿噪声。

针对流程级不一致的判定（RQ2），实验利用这一阶段引入的 100 个变异设计稿样本，对屏幕整体匹配阈值 $epsilon_(s c r e e n)$（定义见 @app:process-inconsistency-report）进行了调优。通过最大化 F1 分数，最终确定该阈值为 0.73，即当屏幕间的整体相似度低于此值时，系统将判定为流程执行偏离。


#include "screen.typ"

#include "process.typ"
#include "detection.typ"
#include "vlm.typ"
#include "case_study.typ"
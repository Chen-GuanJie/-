#import "@preview/modern-sjtu-thesis:0.5.1": *
#import "../../define.typ": *
= 方法实现 <chp:approach>
== 总体概述

#imagex(
  image(
    "../../figures/overview.pdf",
    width: 100%,
  ),
  caption: [#(tool) 的整体工作流程],
  caption-en: [The overall workflow of #(tool)],
  label-name: "overview",
)

@img:overview 为 #(tool) 的整体工作流程。
输入包括运行在移动设备上的已实现应用，以及一组设计原型文档，
每个设计稿通常描述一个具体的使用场景（例如“购买交易型开放式指数基金（ETF）”），并含有若干界面与交互步骤的形式化描述。

工作流程首先对输入的设计稿进行语法与语义层面的校验与解析，确保每个流程能被映射为符合元模型规范的表示（参见@app:meta-model）。解析过程包括对流程节点（界面）、组件与操作的结构化抽取，以及对潜在矛盾或缺失信息的静态检测。解析完成后，基于每个流程中定义的操作链，在目标设备上对相应的操作序列进行自动回放以验证实现的可达性与行为一致性。

回放阶段结合设备端的可观测信息与视觉反馈，收集执行轨迹与界面状态变迁；当设计稿中存在隐含或被省略的步骤时，视觉-语言模型（VLM）将用于自动补全必要的中间操作，从而提高操作链的成功率与鲁棒性。回放所得的实际执行流程与设计稿中的预期流程在语义与结构上进行比对，以识别流程级的不一致性（参见@app:process ）。

在完成流程比对之后，还需对每个单独界面执行更细粒度的视觉一致性检查（参见@app:screen），包括组件检测、组件对齐与语义比较，进而发现如多余/缺失组件或视觉语义变化等问题。

整个方法最终生成一份可读性较高的一致性检测报告，该报告列举了应用实现中与设计稿不一致的各类条目，并附带相关证据（如执行轨迹、对比截图、匹配组件的坐标与相似度评分）。报告还可按不一致性类型或严重程度进行聚合排序，以便后续的定位与修复工作。
#include "problem_statement.typ"
#include "meta_model.typ"
#include "screen.typ"
#include "process.typ"

== 本章总结

本章详细介绍了 #(tool) 的核心方法与实现细节。
首先，本章对研究中涉及的关键概念（如控件、屏幕、操作、流程）以及不同层级的不一致性进行了形式化定义，并介绍了设计稿的元模型，为后续的一致性检测奠定了理论基础。
其次，本章深入阐述了界面级不一致性检测的技术路线，包括基于深度学习的组件检测流程，以及融合递归布局分析与动态规划的组件对齐算法，实现了从像素到语义的精细化比对。
在此基础上，本章进一步探讨了流程级不一致性检测的方法，利用视觉-语言模型（VLM）消解设计描述中的歧义，通过自动化回放与状态验证来评估业务逻辑的正确性。
最后，本章展示了通过层级化的检测流程，系统能够生成包含详细证据链的结构化报告，辅助开发者快速定位并修复设计与实现之间的偏差。
通过上述各模块的协同工作，本章所提出的方法能够有效地覆盖移动应用开发中从静态界面到动态流程的全方位一致性验证需求。
